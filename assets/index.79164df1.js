var j=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(t,o,e)=>o in t?j(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,k=(t,o)=>{for(var e in o||(o={}))w.call(o,e)&&g(t,e,o[e]);if(h)for(var e of h(o))R.call(o,e)&&g(t,e,o[e]);return t};var _=(t,o)=>{var e={};for(var r in t)w.call(t,r)&&o.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&h)for(var r of h(t))o.indexOf(r)<0&&R.call(t,r)&&(e[r]=t[r]);return e};import{r as l,f as m,u as O,j as L,C as U,O as x,E as b,a as v,R as D,b as I}from"./vendor.05df4c7b.js";const F=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}};F();function S(t,o=()=>{}){const e=l.exports.useMemo(()=>{const r=new m.exports.ApplicationContext("https://cdn.jsdelivr.net/npm/@facemoji/mocap4face@0.2.0"),n=new m.exports.ResourceFileSystem(r);return m.exports.FacemojiAPI.initialize("cpt6dwjzv2qnx5aj3ayr5pyojvowab7qnmp2ywahef5nmiyixqnaksy",r).then(c=>{console.info(c?"API successfully activated":"API could not be activated")}),m.exports.FaceTracker.createVideoTracker(n).then(c=>(console.log("Started tracking"),window.tracker=c,c)).logError("Could not start tracking")},[]);O(()=>{try{const n=e.currentValue.track(t.current),s=Object.fromEntries(n.blendshapes),c=n.rotationQuaternion.asList().toArray();o(s,c)}catch{}})}function P(t){return o=>{t.forEach(e=>{typeof e=="function"?e(o):e!=null&&(e.current=o)})}}const a=L.exports.jsx,d=L.exports.jsxs,q=L.exports.Fragment,E=l.exports.forwardRef((n,r)=>{var s=n,{play:t,onStart:o=()=>{}}=s,e=_(s,["play","onStart"]);const c=l.exports.useRef(),p=P([c,r]);return l.exports.useLayoutEffect(()=>{const i=c.current;if(t){if(i.srcObject===null){const u={video:!0};navigator.mediaDevices.getUserMedia(u).then(f=>{i.srcObject=f,i.onloadedmetadata=()=>{o(i)}}).catch(f=>{console.error("Error getting webcam stream")})}}else{const u=i.srcObject;u!==null&&(u.getTracks()[0].stop(),i.srcObject=null)}},[t]),a("video",k({ref:p,autoPlay:!0},e))}),T={browOuterUp_L:"browOuterUpLeft",browInnerUp_L:"browInnerUpLeft",browDown_L:"browDownLeft",eyeBlink_L:"eyeBlinkLeft",eyeSquint_L:"eyeSquintLeft",eyeWide_L:"eyeWideLeft",eyeLookUp_L:"eyeLookUpLeft",eyeLookOut_L:"eyeLookOutLeft",eyeLookIn_L:"eyeLookInLeft",eyeLookDown_L:"eyeLookDownLeft",noseSneer_L:"noseSneerLeft",mouthUpperUp_L:"mouthUpperUpLeft",mouthSmile_L:"mouthSmileLeft",mouthLeft:"mouthLeft",mouthFrown_L:"mouthFrownLeft",mouthLowerDown_L:"mouthLowerDownLeft",jawLeft:"jawLeft",cheekPuff:"cheekPuff",mouthShrugUpper:"mouthShrugUpper",mouthFunnel:"mouthFunnel",mouthRollLower:"mouthRollLower",jawOpen:"jawOpen",tongueOut:"tongueOut",mouthPucker:"mouthPucker",mouthRollUpper:"mouthRollUpper",jawRight:"jawRight",mouthLowerDown_R:"mouthLowerDownRight",mouthFrown_R:"mouthFrownRight",mouthRight:"mouthRight",mouthSmile_R:"mouthSmileRight",mouthUpperUp_R:"mouthUpperUpRight",noseSneer_R:"noseSneerRight",eyeLookDown_R:"eyeLookDownRight",eyeLookIn_R:"eyeLookInRight",eyeLookOut_R:"eyeLookOutRight",eyeLookUp_R:"eyeLookUpRight",eyeWide_R:"eyeWideRight",eyeSquint_R:"eyeSquintRight",eyeBlink_R:"eyeBlinkRight",browDown_R:"browDownRight",browInnerUp_R:"browInnerUp",browOuterUp_R:"browOuterUpRight"};function A(){const t=l.exports.useRef();return d(q,{children:[d(U,{camera:{fov:35,position:[0,0,3]},children:[a("color",{attach:"background",args:["black"]}),a(x,{}),d(l.exports.Suspense,{fallback:null,children:[a(b,{preset:"warehouse",background:!0}),a(W,{videoRef:t}),a(b,{preset:"warehouse",background:!0})]})]}),a(E,{ref:t,play:!0,style:{position:"fixed",zIndex:1,top:1},width:300})]})}const M="https://d1a370nemizbjq.cloudfront.net/b2572c50-a10a-42b6-ab30-694f60fed40f.glb";function W({videoRef:t}){const{scene:o,nodes:e}=v(M),r=e.Wolf3D_Head,n=e.Wolf3D_Teeth,s=e.Head,c=e.LeftEye,p=e.RightEye;return window.face=r,S(t,(i,u)=>{window.blendShapes=i;for(let f in i){const y=r.morphTargetDictionary[T[f]];r.morphTargetInfluences[y]=i[f],n.morphTargetInfluences[y]=i[f]}p.rotation.set(-Math.PI/2+i.eyeLookDown_R*.5-i.eyeLookUp_R*.5,0,Math.PI-i.eyeLookOut_R+i.eyeLookOut_L),c.rotation.copy(p.rotation),s.quaternion.fromArray(u)}),a("primitive",{object:o,position:[0,-2.4,0],scale:4})}D.render(a(I.StrictMode,{children:a(A,{})}),document.getElementById("root"));
